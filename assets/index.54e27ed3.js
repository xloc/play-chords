var g=Object.defineProperty;var p=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var h=(e,t,o)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))N.call(t,o)&&h(e,o,t[o]);if(p)for(var o of p(t))v.call(t,o)&&h(e,o,t[o]);return e};import{j as b,P as w,S as j,c as y,a as f,n as l,r as S,b as u,R as A,d as C}from"./vendor.11af40c0.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};K();const i=b.exports.jsx,m=b.exports.jsxs,O=new w(j).toDestination(),D=e=>{e.indexOf(":")===-1&&(e=e+":00112345");const[t,o]=e.split(":"),c=o.split("").map(Number).map(y.degrees(t)),s=c.map(l.chroma);let r=1,n=[];return c.forEach((a,d)=>{if(a===""){r+=1;return}d>0&&s[d]<=s[d-1]&&(r+=1),n.push(`${a}${r}`)}),x({playedNotes:n},y.get(t))};function E(e){const{onActivate:t,text:o}=e,{playedNotes:c,symbol:s}=D(o),r="ontouchstart"in window?!0:void 0,n=a=>{O.triggerAttackRelease(c,"8n"),t&&t(c)};return m("button",{className:f("h-40 w-40 shadow-md border rounded-md p-3 select-none",{"bg-red-200":c.length===0}),onMouseDown:r?void 0:n,onTouchStart:r?n:void 0,children:[i("p",{className:"text-5xl",children:s}),i("p",{className:"text-xs pt-2",children:c.join(" ")})]})}const R=(e,t)=>(e=l.simplify(e),(e.includes("#")||e.includes("b"))&&(e=l.transpose(e,"2m"),e=l.simplify(e)),t=l.simplify(t),(t.includes("#")||t.includes("b"))&&(t=l.transpose(t,"2m"),t=l.simplify(t)),[e,t]),k=e=>e.includes("b")||e.includes("#");function L(e){var r;const[t,o]=R(e.start,e.end),c=S.chromatic([t,o],{sharps:!0}),s=new Set((r=e.pressedKeys)==null?void 0:r.map(l.midi));return i("div",{className:"flex h-full justify-center",children:c.map(n=>{const a=k(n),d=s.has(l.midi(n));return i("div",{className:f("flex justify-center items-end  h-full w-10 rounded-b-xl bg-slate-200 border-white",{"-mx-5 h-3/5 z-10 w-10 border-x-[4px] border-b-[4px]":a,"mx-[2px]":!a,"bg-orange-50":!d,"bg-orange-200":d}),children:i("p",{className:"text-xs m-2",children:n})},n)})})}function P(){const[e,t]=u.exports.useState("Fmaj7:001134 G6 Em Am:001124 Dm G7:01131234 C6:00131412"),[o,c]=u.exports.useState(!1),[s,r]=u.exports.useState([]);return m("div",{className:"flex flex-col h-screen",children:[m("div",{className:"flex h-16",children:[i("button",{className:"w-16 m-2 border rounded",onClick:()=>c(n=>!n),children:"EDIT"}),i("input",{className:f("flex-1 m-2 px-2 border rounded",{hidden:!o}),type:"text",value:e,onChange:n=>{t(n.target.value)}})]}),i("div",{className:"flex flex-1 justify-center items-center overflow-y-scroll",children:i("div",{className:"flex items-center flex-wrap justify-center gap-5",children:e.split(" ").map(n=>i(E,{text:n,onActivate:a=>r(a)},n))})}),i("div",{className:"h-40 w-full border-t",children:i(L,{start:"A2",end:"D6",pressedKeys:s})})]})}A.render(i(C.StrictMode,{children:i(P,{})}),document.getElementById("root"));
